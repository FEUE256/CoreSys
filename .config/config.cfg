ROOT_DIR := ../../
SRC_DIR := $(abspath $(ROOT_DIR)src/CoreSys)
BUILD_DIR := $(abspath $(ROOT_DIR)build/CoreSys)
MODE := Debug
BIN_DIR := $(abspath $(ROOT_DIR)bin/$(MODE)/)
BUILD_EFI := $(BIN_DIR)/BOOTX64.EFI
EDK2_MODE := $(MODE)
OUTPUT_DIR := $(abspath $(ROOT_DIR)bin/$(MODE)/CoreSys)
CC := x86_64-w64-mingw32-gcc
LD := x86_64-w64-mingw32-ld
INC_DIR := $(SRC_DIR)/include
INCLUDES := -I$(INC_DIR) -I$(INC_DIR)/EDK/MdePkg/Include -I$(INC_DIR)/EDK/MdePkg/Include/X64 -I$(INC_DIR)/EDK/MdeModulePkg/Include -I$(INC_DIR)/EDK/MdeModulePkg/Include/X64
CFLAGS := -std=c17 -Wall -Wextra -Wpedantic -ffreestanding -fshort-wchar -fno-exceptions -fno-asynchronous-unwind-tables -mno-red-zone -mno-sse -m64 -nostdlib $(INCLUDES)
LDFLAGS := -nostdlib -T $(BUILD_DIR)/efi.ld -Wl,--subsystem,10 -Wl,--image-base,0 -Wl,--emit-relocs -Wl,--section-alignment,4096 -Wl,--file-alignment,4096 -Wl,-entry,efi_main
SRCS := $(wildcard $(SRC_DIR)/*.c)
SRC_FILE := $(SRC_DIR)/efi.c
O_FILE := $(BUILD_DIR)/efi.o
GPT_MODE := Release # The mode from the gpt.cfg file DO NOT ONLY THIS OR ONLY the MODE_GPT in gpt.cfg IF YOU WANT TO CHAGE, CHANGE BOTH ELSE YOU COME GET A BUILD ERROR!
GPT_TOOL = $(ROOT_DIR)bin/Release/GPT/write_gpt.run
GPT_IMG := $(BUILD_DIR)/CoreSys.img
GPT_FILE_TXT := $(BUILD_DIR)/FILE.TXT
FINAL_IMG_DIR := $(BIN_DIR)/CoreSys
FINAL_IMG := $(FINAL_IMG_DIR)/CoreSys.img
SCRIPTS_DIR := $(ROOT_DIR)scripts
QEMU_SCRIPT := $(SCRIPTS_DIR)/qemu.sh
QEMU_MODE := $(MODE)
